{"ast":null,"code":"const API_BASE = \"https://localhost:5001/api/notes\";\n\n// ---- color mapping ----\nconst toApiColor = c => {\n  switch (c) {\n    case \"yellow\":\n      return \"Yellow\";\n    case \"pink\":\n      return \"Pink\";\n    case \"blue\":\n      return \"Blue\";\n    case \"green\":\n      return \"Green\";\n  }\n};\nconst fromApiColor = c => {\n  switch (c) {\n    case \"Yellow\":\n      return \"yellow\";\n    case \"Pink\":\n      return \"pink\";\n    case \"Blue\":\n      return \"blue\";\n    case \"Green\":\n      return \"green\";\n  }\n};\nconst toUiNote = n => ({\n  ...n,\n  color: fromApiColor(n.color)\n});\nasync function request(url, init) {\n  const res = await fetch(url, init);\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    throw new Error(`${res.status} ${text}`);\n  }\n  return res.json();\n}\nexport const NotesApi = {\n  async getNotes() {\n    const apiNotes = await request(API_BASE);\n    return apiNotes.map(toUiNote);\n  },\n  async createNote(dto) {\n    const payload = {\n      ...dto,\n      color: toApiColor(dto.color)\n    };\n    const created = await request(API_BASE, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(payload)\n    });\n    return toUiNote(created);\n  },\n  async updateNote(id, patch) {\n    const {\n      color,\n      ...rest\n    } = patch;\n    const payload = {\n      ...rest,\n      ...(color ? {\n        color: toApiColor(color)\n      } : {})\n    };\n    const updated = await request(`${API_BASE}/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(payload)\n    });\n    return toUiNote(updated);\n  },\n  async deleteNote(id) {\n    await request(`${API_BASE}/${id}`, {\n      method: \"DELETE\"\n    });\n  }\n};","map":{"version":3,"names":["API_BASE","toApiColor","c","fromApiColor","toUiNote","n","color","request","url","init","res","fetch","ok","text","catch","Error","status","json","NotesApi","getNotes","apiNotes","map","createNote","dto","payload","created","method","headers","body","JSON","stringify","updateNote","id","patch","rest","updated","deleteNote"],"sources":["C:/Development/Tempo/sticky-notes/src/api/notesApi.ts"],"sourcesContent":["import { Note, NoteCreate, NotePatch, NoteColor } from \"../types\";\r\n\r\ntype ApiNoteColor = \"Yellow\" | \"Pink\" | \"Blue\" | \"Green\";\r\n\r\ntype ApiNote = Omit<Note, \"color\"> & { color: ApiNoteColor };\r\ntype ApiNoteCreate = Omit<NoteCreate, \"color\"> & { color: ApiNoteColor };\r\ntype ApiNotePatch = Partial<ApiNoteCreate>;\r\n\r\nconst API_BASE = \"https://localhost:5001/api/notes\";\r\n\r\n// ---- color mapping ----\r\nconst toApiColor = (c: NoteColor): ApiNoteColor => {\r\n  switch (c) {\r\n    case \"yellow\":\r\n      return \"Yellow\";\r\n    case \"pink\":\r\n      return \"Pink\";\r\n    case \"blue\":\r\n      return \"Blue\";\r\n    case \"green\":\r\n      return \"Green\";\r\n  }\r\n};\r\n\r\nconst fromApiColor = (c: ApiNoteColor): NoteColor => {\r\n  switch (c) {\r\n    case \"Yellow\":\r\n      return \"yellow\";\r\n    case \"Pink\":\r\n      return \"pink\";\r\n    case \"Blue\":\r\n      return \"blue\";\r\n    case \"Green\":\r\n      return \"green\";\r\n  }\r\n};\r\n\r\nconst toUiNote = (n: ApiNote): Note => ({ ...n, color: fromApiColor(n.color) });\r\n\r\nasync function request<T>(url: string, init?: RequestInit): Promise<T> {\r\n  const res = await fetch(url, init);\r\n  if (!res.ok) {\r\n    const text = await res.text().catch(() => \"\");\r\n    throw new Error(`${res.status} ${text}`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport const NotesApi = {\r\n  async getNotes(): Promise<Note[]> {\r\n    const apiNotes = await request<ApiNote[]>(API_BASE);\r\n    return apiNotes.map(toUiNote);\r\n  },\r\n\r\n  async createNote(dto: NoteCreate): Promise<Note> {\r\n    const payload: ApiNoteCreate = { ...dto, color: toApiColor(dto.color) };\r\n\r\n    const created = await request<ApiNote>(API_BASE, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(payload)\r\n    });\r\n\r\n    return toUiNote(created);\r\n  },\r\n\r\nasync updateNote(id: string, patch: NotePatch): Promise<Note> {\r\n  const { color, ...rest } = patch;\r\n\r\n  const payload: ApiNotePatch = {\r\n    ...rest,\r\n    ...(color ? { color: toApiColor(color) } : {})\r\n  };\r\n\r\n  const updated = await request<ApiNote>(`${API_BASE}/${id}`, {\r\n    method: \"PATCH\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload)\r\n  });\r\n\r\n  return toUiNote(updated);\r\n},\r\n\r\n  async deleteNote(id: string): Promise<void> {\r\n    await request<void>(`${API_BASE}/${id}`, { method: \"DELETE\" });\r\n  }\r\n};\r\n"],"mappings":"AAQA,MAAMA,QAAQ,GAAG,kCAAkC;;AAEnD;AACA,MAAMC,UAAU,GAAIC,CAAY,IAAmB;EACjD,QAAQA,CAAC;IACP,KAAK,QAAQ;MACX,OAAO,QAAQ;IACjB,KAAK,MAAM;MACT,OAAO,MAAM;IACf,KAAK,MAAM;MACT,OAAO,MAAM;IACf,KAAK,OAAO;MACV,OAAO,OAAO;EAClB;AACF,CAAC;AAED,MAAMC,YAAY,GAAID,CAAe,IAAgB;EACnD,QAAQA,CAAC;IACP,KAAK,QAAQ;MACX,OAAO,QAAQ;IACjB,KAAK,MAAM;MACT,OAAO,MAAM;IACf,KAAK,MAAM;MACT,OAAO,MAAM;IACf,KAAK,OAAO;MACV,OAAO,OAAO;EAClB;AACF,CAAC;AAED,MAAME,QAAQ,GAAIC,CAAU,KAAY;EAAE,GAAGA,CAAC;EAAEC,KAAK,EAAEH,YAAY,CAACE,CAAC,CAACC,KAAK;AAAE,CAAC,CAAC;AAE/E,eAAeC,OAAOA,CAAIC,GAAW,EAAEC,IAAkB,EAAc;EACrE,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAEC,IAAI,CAAC;EAClC,IAAI,CAACC,GAAG,CAACE,EAAE,EAAE;IACX,MAAMC,IAAI,GAAG,MAAMH,GAAG,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,EAAE,CAAC;IAC7C,MAAM,IAAIC,KAAK,CAAC,GAAGL,GAAG,CAACM,MAAM,IAAIH,IAAI,EAAE,CAAC;EAC1C;EACA,OAAOH,GAAG,CAACO,IAAI,CAAC,CAAC;AACnB;AAEA,OAAO,MAAMC,QAAQ,GAAG;EACtB,MAAMC,QAAQA,CAAA,EAAoB;IAChC,MAAMC,QAAQ,GAAG,MAAMb,OAAO,CAAYP,QAAQ,CAAC;IACnD,OAAOoB,QAAQ,CAACC,GAAG,CAACjB,QAAQ,CAAC;EAC/B,CAAC;EAED,MAAMkB,UAAUA,CAACC,GAAe,EAAiB;IAC/C,MAAMC,OAAsB,GAAG;MAAE,GAAGD,GAAG;MAAEjB,KAAK,EAAEL,UAAU,CAACsB,GAAG,CAACjB,KAAK;IAAE,CAAC;IAEvE,MAAMmB,OAAO,GAAG,MAAMlB,OAAO,CAAUP,QAAQ,EAAE;MAC/C0B,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,OAAO;IAC9B,CAAC,CAAC;IAEF,OAAOpB,QAAQ,CAACqB,OAAO,CAAC;EAC1B,CAAC;EAEH,MAAMM,UAAUA,CAACC,EAAU,EAAEC,KAAgB,EAAiB;IAC5D,MAAM;MAAE3B,KAAK;MAAE,GAAG4B;IAAK,CAAC,GAAGD,KAAK;IAEhC,MAAMT,OAAqB,GAAG;MAC5B,GAAGU,IAAI;MACP,IAAI5B,KAAK,GAAG;QAAEA,KAAK,EAAEL,UAAU,CAACK,KAAK;MAAE,CAAC,GAAG,CAAC,CAAC;IAC/C,CAAC;IAED,MAAM6B,OAAO,GAAG,MAAM5B,OAAO,CAAU,GAAGP,QAAQ,IAAIgC,EAAE,EAAE,EAAE;MAC1DN,MAAM,EAAE,OAAO;MACfC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,OAAO;IAC9B,CAAC,CAAC;IAEF,OAAOpB,QAAQ,CAAC+B,OAAO,CAAC;EAC1B,CAAC;EAEC,MAAMC,UAAUA,CAACJ,EAAU,EAAiB;IAC1C,MAAMzB,OAAO,CAAO,GAAGP,QAAQ,IAAIgC,EAAE,EAAE,EAAE;MAAEN,MAAM,EAAE;IAAS,CAAC,CAAC;EAChE;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}